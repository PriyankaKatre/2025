import{r as o,j as a,P as b,b as y,d as C,A as v,u as S,B as k,e as h,s as m}from"./index-B8V2LFaY.js";import{C as U,b as L,c as A,a as P}from"./card-DLLc57Xf.js";import{I as p}from"./input-ZkXcV_LX.js";var E="Label",f=o.forwardRef((s,n)=>a.jsx(b.label,{...s,ref:n,onMouseDown:t=>{var i;t.target.closest("button, input, select, textarea")||((i=s.onMouseDown)==null||i.call(s,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));f.displayName=E;var j=f;const I=C("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=o.forwardRef(({className:s,...n},t)=>a.jsx(j,{ref:t,className:y(I(),s),...n}));u.displayName=j.displayName;function q(){const[s,n]=o.useState("Sign Up"),{backendurl:t,setToken:g,location:i}=o.useContext(v);S();const[l,w]=o.useState({name:"",email:"",password:""});console.log("location",i);const x=r=>{let{name:c,value:d}=r.target;w(e=>({...e,[c]:d}))},N=async r=>{var c,d;r.preventDefault();try{if(s==="Sign Up"){const e=await h.post(`${t}/api/user/register`,l);e!=null&&e.data.success&&e.status===201&&(g(e==null?void 0:e.data.token),localStorage.setItem("token",e==null?void 0:e.data.token),m("success",(c=e==null?void 0:e.data)==null?void 0:c.message))}else{const e=await h.post(`${t}/api/user/login`,{email:l.email,password:l.password});e!=null&&e.data.success&&(g(e==null?void 0:e.data.token),localStorage.setItem("token",e==null?void 0:e.data.token),m("success",(d=e==null?void 0:e.data)==null?void 0:d.message))}}catch(e){e.response&&e.response.data&&e.response.data.message?m("error",e.response.data.message||"An error occurred during login."):m("error",e.message||"An error occurred during login.")}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:a.jsxs(U,{className:"w-full max-w-[400px]",children:[a.jsxs(L,{children:[a.jsx(A,{className:"text-xl font-semibold",children:s==="Sign Up"?"Create Account":"Login"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Please",s==="Sign Up"?"Create Account":"Login"," to book appointment"]})]}),a.jsx(P,{children:a.jsxs("form",{className:"space-y-4",onSubmit:N,children:[s==="Sign Up"?a.jsxs("div",{className:"space-y-2",children:[a.jsx(u,{htmlFor:"name",children:"Full Name"}),a.jsx(p,{id:"name",type:"name",placeholder:"Name",name:"name",value:l.name,required:!0,onChange:r=>x(r)})]}):"",a.jsxs("div",{className:"space-y-2",children:[a.jsx(u,{htmlFor:"email",children:"Email"}),a.jsx(p,{id:"email",type:"email",name:"email",placeholder:"Email",value:l.email,required:!0,onChange:r=>x(r)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(u,{htmlFor:"password",children:"Password"}),a.jsx(p,{id:"password",name:"password",type:"password",value:l.password,placeholder:"Password",required:!0,onChange:r=>x(r)})]}),a.jsx(k,{type:"submit",className:"w-full bg-teal-600 hover:bg-teal-500",children:s==="Sign Up"?"Sign Up":"Login"}),a.jsx("div",{className:"text-sm text-center",children:s==="Sign Up"?a.jsxs("p",{className:"text-muted-foreground",children:["Already have an account?",a.jsx("span",{className:"text-teal-600 font-bold ml-1 cursor-pointer",onClick:()=>n("Login"),children:"Login"})]}):a.jsxs("p",{className:"text-muted-foreground",children:["Create a new account?",a.jsx("span",{className:"text-teal-600 font-bold ml-1 cursor-pointer",onClick:()=>n("Sign Up"),children:"Sign Up"})]})})]})})]})})}export{q as default};
